# Neighbourhoods and other small areas

```{r packages, message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse)
library(readxl)
library(httr)
library(sf)
````

The UK is carved into a range of small areas --- different kinds of **Output Area** and **wards** --- each of which have a variety of datasets associated with them, including population estimates, rural-urban classifications, the Index of Multiple Deprivation, and the British Red Cross Vulnerability Index.

The various Output Areas are known as **statistical geographies** - they don't necessarily represent what their residents would consider a meaningful neighbourhood or community. Instead, they were created for the Census with the intention of containing roughly the same numbers of people.

## Output Areas (OAs)


## Lower Layer Super Output Areas (LSOAs)

The next level up is called **Lower Layer Super Output Area** in England and Wales, **Data Zone** in Scotland, and **Super Output Area** in Northern Ireland.

```{r load_lsoa_data include=FALSE}
lsoa_bounds <- read_rds("data/boundaries/lsoa_bounds.rds")
lsoa_pop <- read_rds("data/population/lsoa_pop.rds")
````

There are `r scales::comma(nrow(lsoa_pop))` LSOAs in England and Wales. LSOAs contain on average `r scales::comma(median(lsoa_pop$`All Ages`))` people, although this ranges from `r scales::comma(min(lsoa_pop$`All Ages`))` up to `r scales::comma(max(lsoa_pop$`All Ages`))` people.

````{r lsoa_pop_hist}
lsoa_pop %>% 
  ggplot(aes(x = `All Ages`)) +
  geom_histogram(binwidth = 100) +
  scale_x_continuous(labels = scales::comma) +
  scale_y_continuous(labels = scales::comma) +
  labs(x = "Number of people", y = "Numbe of LSOAs") +
  theme_classic()
````

LSOAs vary significantly in geographical size, the smallest being `r subset(lsoa_bounds, Shape__Area == min(lsoa_bounds$Shape__Area))$LSOA11NM` (`r scales::comma(subset(lsoa_bounds, Shape__Area == min(lsoa_bounds$Shape__Area))$Shape__Area / 1000)`km^2) and the largest being `r subset(lsoa_bounds, Shape__Area == max(lsoa_bounds$Shape__Area))$LSOA11NM` (`r scales::comma(subset(lsoa_bounds, Shape__Area == max(lsoa_bounds$Shape__Area))$Shape__Area / 1000)`km^2).

### Deprivation and rural-urban classifications

The **Index of Multiple Deprivation** and **rural-urban classifications** are calculated for LSOAs (and their devolved equivalents). Most rural areas tend to be towards the least-deprived end:

````{r load_imd}
lsoa_imd <- read_csv("https://github.com/matthewgthomas/IMD/raw/master/data/UK%20IMD%20domains.csv")
````

````{r plot_imd}
lsoa_imd %>% 
  ggplot(aes(x = factor(IMD_decile), fill = RUC)) +
  geom_histogram(stat = "count") +
  
  scale_y_continuous(labels = scales::comma) +
  labs(x = "Deprivation decile\n(1 = most deprived)", y = "Number of LSOAs") +
  theme_classic()
  
````

## Middle Layer Super Output Areas (MSOAs)
The final kind of Output Area is the MSOA (in England and Wales), also called **Intermediate Zones** in Scotland. There is no equivalent in Northern Ireland.

### Vulnerability
The British Red Cross's Vulnerability Index is calculated for MSOAs (and their devolved equivalents).


## Wards

### Community Needs Index
OCSI's Community Needs Index is calculated for wards.

